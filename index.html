<!DOCTYPE html>
<html>
<head>
	<title>textAnalisator2.0</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<meta charset="utf-8">
</head>
<body>
<input type="file" id="file" class="hidden">
<label for="file" class="input">select file</label><br>
<div class="inline"><span class="results">Total amount of words:  </span><span class="results" id="amount"></span><br></div>
<div class="inline"><span class="results">The most popular word:  </span><span class="results" id="popular"></span><br></div>
<div class="inline"><span class="results">Total amount of the most popular word:  </span><span class="results" id="amountPopular"></span></div>
<table>
	<tr><td></td><td class="popular1"></td><td class="amountPopular1"></td></tr>
	<tr><td></td><td class="popular2"></td><td class="amountPopular2"></td></tr>
	<tr><td></td><td class="popular3"></td><td class="amountPopular3"></td></tr>
	<tr><td></td><td class="popular4"></td><td class="amountPopular4"></td></tr>
	<tr><td></td><td class="popular5"></td><td class="amountPopular5"></td></tr>
	<tr><td></td><td class="popular6"></td><td class="amountPopular6"></td></tr>
	<tr><td></td><td class="popular7"></td><td class="amountPopular7"></td></tr>
	<tr><td></td><td class="popular8"></td><td class="amountPopular8"></td></tr>
	<tr><td></td><td class="popular9"></td><td class="amountPopular9"></td></tr>
	<tr><td></td><td class="popular10"></td><td class="amountPopular10"></td></tr>
</table>

<script type="text/javascript">

var inputValue = '' ;

document.getElementById('file').addEventListener('change', readFile, false);
function readFile (evt) {
    var files = evt.target.files;
    var file = files[0];           
    var reader = new FileReader();
    reader.onload = function(event) {
    inputValue += event.target.result;           
  	split = inputValue.split('\n');
   	split = split.map(function(number) {
   		return number.split('');
   	}).map(function(number) {
   		return number.map(digit=>{
		return parseInt(digit);
    		});
    	});

   var textArray = inputValue
   			.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()'"]/g,"")
   			.replace(/[\n]/g,' ')
   			.split(' ').filter(function(elem) {
			   	return !(elem === '' || elem === ' '); //elem !== " " && elem !== "";
			   })
			   .map(function(elem) {
			  		return elem.toLowerCase();
				});
   
	  
	var object = {};
console.log(textArray);
   for (var i = 0; i < textArray.length; i++) {
   	var word = textArray[i].toString();
   	var wordAmount = 1;

   	if (object[word]) {
   		object[word]++;
   	} else {
   		object[word] = 1;
   	}

   }
   Object.keys(object).forEach(key=>{
   	if(key.indexOf('"')!==-1) console.log(key);
   });
			   // for (var j = i + 1; j < textArray.length; j++) {
			   // 	if (word == textArray[j]) {
			   // 		wordAmount++;
			   // 	} else if (wordAmount > mPWord.amount) {
			   // 		mPWord.word = word;
			   // 		mPWord.amount = wordAmount;
			   // 	}
			   // }

	   	


	   	//console.log(object);

   	// 	for (var l = 0; l < array.length; l++) {
				// var indx = array.indexOf(mPWord.word);
				// array.splice(indx, 1);
   	// 	}
   	//}
	   
		


	// document.getElementById('popular').innerHTML = mPWord.word;
   // document.getElementById('amountPopular').innerHTML = mPWord.amount;
   document.getElementById('amount').innerHTML = textArray.length;
   

   

   


   	}
       reader.readAsText(file);
      
       return inputValue;
    }

</script>
</body>
</html>